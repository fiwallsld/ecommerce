{"ast":null,"code":"var _jsxFileName = \"/Users/hoangthanh/Desktop/Code/ASM3/client/src/Authentication/SignIn.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport UserAPI from \"../API/UserAPI\";\nimport { addSession } from \"../Redux/Action/ActionSession\";\nimport { addUser } from \"../Redux/Action/ActionCart\";\nimport \"./Auth.css\";\nimport queryString from \"query-string\";\nimport CartAPI from \"../API/CartAPI\";\nimport alertify from \"alertifyjs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SignIn(props) {\n  _s();\n  const dispatch = useDispatch();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [redirect, setRedirect] = useState(false);\n  const [errorRes, setErrorRes] = useState(null);\n  const onChangeEmail = e => {\n    setEmail(e.target.value);\n  };\n  const onChangePassword = e => {\n    setPassword(e.target.value);\n  };\n  const onSubmit = () => {\n    const fetchSignIn = async () => {\n      try {\n        const params = {\n          email: email,\n          password: password\n        };\n        const query = \"?\" + queryString.stringify(params);\n        const response = await UserAPI.postLogin(query);\n\n        // console.log(\"Login by username, password:--\", response);\n        setErrorRes(null);\n        localStorage.setItem(\"token\", response.user.token);\n        const addUserSection = addSession({\n          userId: response.user.userId,\n          email: response.user.email,\n          fullname: response.user.fullname,\n          token: response.user.token,\n          roomId: response.user.roomId\n        });\n        const addUserCart = addUser({\n          userId: response.user.userId,\n          listCart: response.user.cart\n        });\n        dispatch(addUserSection);\n        dispatch(addUserCart);\n        alertify.set(\"notifier\", \"position\", \"top-center\");\n        alertify.success(response.message);\n        setRedirect(true);\n      } catch (error) {\n        var _error$response;\n        // console.log(error.response?.data);\n        setErrorRes((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      }\n    };\n    fetchSignIn();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"limiter\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-login100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-login100 p-l-55 p-r-55 p-t-65 p-b-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"login100-form-title p-b-33\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap-input100 validate-input\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input100\",\n            type: \"text\",\n            placeholder: \"Email\",\n            value: email,\n            onChange: onChangeEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), (errorRes === null || errorRes === void 0 ? void 0 : errorRes.email) && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: errorRes.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap-input100 rs1 validate-input\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input100\",\n            type: \"password\",\n            placeholder: \"Password\",\n            value: password,\n            onChange: onChangePassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), (errorRes === null || errorRes === void 0 ? void 0 : errorRes.password) && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: errorRes.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-login100-form-btn m-t-20\",\n          children: [redirect && /*#__PURE__*/_jsxDEV(Redirect, {\n            to: `/`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 26\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"login100-form-btn\",\n            onClick: onSubmit,\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-t-45 p-b-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"txt1\",\n            children: \"Create an account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            className: \"txt2 hov1\",\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(SignIn, \"JbGyf+FufSWG+sFRF7hBFQCiFvg=\", false, function () {\n  return [useDispatch];\n});\n_c = SignIn;\nexport default SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Link","Redirect","UserAPI","addSession","addUser","queryString","CartAPI","alertify","jsxDEV","_jsxDEV","SignIn","props","_s","dispatch","email","setEmail","password","setPassword","redirect","setRedirect","errorRes","setErrorRes","onChangeEmail","e","target","value","onChangePassword","onSubmit","fetchSignIn","params","query","stringify","response","postLogin","localStorage","setItem","user","token","addUserSection","userId","fullname","roomId","addUserCart","listCart","cart","set","success","message","error","_error$response","data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","to","onClick","_c","$RefreshReg$"],"sources":["/Users/hoangthanh/Desktop/Code/ASM3/client/src/Authentication/SignIn.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport UserAPI from \"../API/UserAPI\";\nimport { addSession } from \"../Redux/Action/ActionSession\";\nimport { addUser } from \"../Redux/Action/ActionCart\";\nimport \"./Auth.css\";\nimport queryString from \"query-string\";\nimport CartAPI from \"../API/CartAPI\";\nimport alertify from \"alertifyjs\";\n\nfunction SignIn(props) {\n  const dispatch = useDispatch();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [redirect, setRedirect] = useState(false);\n  const [errorRes, setErrorRes] = useState(null);\n\n  const onChangeEmail = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const onChangePassword = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const onSubmit = () => {\n    const fetchSignIn = async () => {\n      try {\n        const params = {\n          email: email,\n          password: password,\n        };\n        const query = \"?\" + queryString.stringify(params);\n        const response = await UserAPI.postLogin(query);\n\n        // console.log(\"Login by username, password:--\", response);\n        setErrorRes(null);\n        localStorage.setItem(\"token\", response.user.token);\n\n        const addUserSection = addSession({\n          userId: response.user.userId,\n          email: response.user.email,\n          fullname: response.user.fullname,\n          token: response.user.token,\n          roomId: response.user.roomId,\n        });\n\n        const addUserCart = addUser({\n          userId: response.user.userId,\n          listCart: response.user.cart,\n        });\n\n        dispatch(addUserSection);\n        dispatch(addUserCart);\n\n        alertify.set(\"notifier\", \"position\", \"top-center\");\n        alertify.success(response.message);\n        setRedirect(true);\n      } catch (error) {\n        // console.log(error.response?.data);\n        setErrorRes(error.response?.data);\n      }\n    };\n\n    fetchSignIn();\n  };\n\n  return (\n    <div className=\"limiter\">\n      <div className=\"container-login100\">\n        <div className=\"wrap-login100 p-l-55 p-r-55 p-t-65 p-b-50\">\n          <span className=\"login100-form-title p-b-33\">Sign In</span>\n\n          <div className=\"wrap-input100 validate-input\">\n            <input\n              className=\"input100\"\n              type=\"text\"\n              placeholder=\"Email\"\n              value={email}\n              onChange={onChangeEmail}\n            />\n          </div>\n          {errorRes?.email && (\n            <span className=\"text-danger\">{errorRes.email}</span>\n          )}\n\n          <div className=\"wrap-input100 rs1 validate-input\">\n            <input\n              className=\"input100\"\n              type=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={onChangePassword}\n            />\n          </div>\n          {errorRes?.password && (\n            <span className=\"text-danger\">{errorRes.password}</span>\n          )}\n\n          <div className=\"container-login100-form-btn m-t-20\">\n            {redirect && <Redirect to={`/`} />}\n            <button className=\"login100-form-btn\" onClick={onSubmit}>\n              Sign in\n            </button>\n          </div>\n\n          <div className=\"text-center p-t-45 p-b-4\">\n            <span className=\"txt1\">Create an account?</span>\n            &nbsp;\n            <Link to=\"/signup\" className=\"txt2 hov1\">\n              Sign up\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default SignIn;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}